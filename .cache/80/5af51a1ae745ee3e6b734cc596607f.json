{"id":"ZVl3","dependencies":[{"name":"/Users/dvsth/Code/devseth.com/package.json","includedInParent":true,"mtime":1612397970111},{"name":"../styles/home.css","loc":{"line":1,"column":7},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/styles/home.css"},{"name":"react","loc":{"line":3,"column":18},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/node_modules/react/index.js"},{"name":"three","loc":{"line":5,"column":23},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/node_modules/three/build/three.module.js"},{"name":"lodash.debounce","loc":{"line":6,"column":21},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/node_modules/lodash.debounce/index.js"},{"name":"./three-examples/loaders/GLTFLoader","loc":{"line":8,"column":27},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/graphics/three-examples/loaders/GLTFLoader.js"},{"name":"./three-examples/postprocessing/EffectComposer","loc":{"line":9,"column":31},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/graphics/three-examples/postprocessing/EffectComposer.js"},{"name":"./three-examples/postprocessing/RenderPass","loc":{"line":10,"column":27},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/graphics/three-examples/postprocessing/RenderPass.js"},{"name":"./three-examples/postprocessing/ShaderPass","loc":{"line":11,"column":27},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/graphics/three-examples/postprocessing/ShaderPass.js"},{"name":"./three-examples/controls/OrbitControls","loc":{"line":12,"column":30},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/graphics/three-examples/controls/OrbitControls.js"},{"name":"../shaders/Additive","loc":{"line":14,"column":27},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/shaders/Additive.js"},{"name":"../shaders/ASCII","loc":{"line":15,"column":24},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/shaders/ASCII.js"},{"name":"../shaders/Ripple","loc":{"line":16,"column":25},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/shaders/Ripple.js"},{"name":"../shaders/Scan","loc":{"line":17,"column":23},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/shaders/Scan.js"},{"name":"../shaders/VertexLitParticle","loc":{"line":18,"column":30},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/shaders/VertexLitParticle.js"},{"name":"../shaders/VolumetricLightScattering","loc":{"line":19,"column":38},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/shaders/VolumetricLightScattering.js"},{"name":"../shaders/VolumetricLightCylinder","loc":{"line":20,"column":36},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/shaders/VolumetricLightCylinder.js"},{"name":"./devface.glb","loc":{"line":109,"column":29},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/graphics/devface.glb"},{"name":"./font3.png","loc":{"line":390,"column":29},"parent":"/Users/dvsth/Code/devseth.com/src/graphics/graphics.js","resolved":"/Users/dvsth/Code/devseth.com/src/graphics/font3.png"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0,require(\"../styles/home.css\");var e=w(require(\"react\")),t=g(require(\"three\")),i=w(require(\"lodash.debounce\")),n=require(\"./three-examples/loaders/GLTFLoader\"),r=require(\"./three-examples/postprocessing/EffectComposer\"),o=require(\"./three-examples/postprocessing/RenderPass\"),a=require(\"./three-examples/postprocessing/ShaderPass\"),s=require(\"./three-examples/controls/OrbitControls\"),l=w(require(\"../shaders/Additive\")),h=w(require(\"../shaders/ASCII\")),c=w(require(\"../shaders/Ripple\")),u=w(require(\"../shaders/Scan\")),d=w(require(\"../shaders/VertexLitParticle\")),f=w(require(\"../shaders/VolumetricLightScattering\")),m=w(require(\"../shaders/VolumetricLightCylinder\"));function p(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function g(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=n?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=e[r]}return i.default=e,t&&t.set(e,i),i}function w(e){return e&&e.__esModule?e:{default:e}}function C(e){return(C=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,i){return t&&v(e.prototype,t),i&&v(e,i),e}function R(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=x();return function(){var i,n=O(e);if(t){var r=O(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return L(this,i)}}function L(e,t){return!t||\"object\"!==C(t)&&\"function\"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function x(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var M=new t.Vector2(0,0),_=function(s){R(g,e.default.Component);var p=b(g);function g(){var i;return y(this,g),E(T(i=p.call(this)),\"renderScene\",function(){var e=i.clock.getDelta();i.modelContainer.rotation.y=-2.09+M.x,i.modelContainer.rotation.z=-M.y/6+.2,i.animateParticles(e),i.scanPass.uniforms.scan.value=(i.scanPass.uniforms.scan.value+.5*e)%2,i.lightCone.lookAt(i.lightConeTarget),i.lightCylinderMaterial.uniforms.spotPosition.value=i.lightCone.position;var t=i.lightCone.position.clone().project(i.occlusionCamera);i.lightScatteringPass.uniforms.lightPosition.value.set((t.x+1)/2,(t.y+1)/2),i.renderRipples(e),i.renderer.setRenderTarget(i.lowResRenderTarget),i.renderer.render(i.mainScene,i.mainCamera),i.renderer.setRenderTarget(i.occlusionRenderTarget),i.occlusionComposer.render(),i.renderer.setRenderTarget(i.lowResEffectRenderTarget),i.effectComposer.render(),i.renderer.setRenderTarget(null),i.finalComposer.render(),i.frameId=window.requestAnimationFrame(i.renderScene)}),E(T(i),\"render\",function(){return e.default.createElement(\"div\",{ref:function(e){i.mount=e}})}),i.clock=new t.Clock,i}return S(g,[{key:\"componentDidMount\",value:function(){var e=this;function s(){var e=[1*window.innerWidth/8,1*window.innerHeight/8],t=e.map(Math.ceil);return{charCountPrecise:e,charCountCeil:t}}this.DEFAULT_LAYER=0,this.OCCLUSION_LAYER=1,this.FONT_MAP_SIZE=new t.Vector2(64,64),this.FONT_CHAR_SIZE=new t.Vector2(8,8),this.rotationClockwise=!0,this.mainScene=new t.Scene,this.mainCamera=new t.PerspectiveCamera(30,window.innerWidth/window.innerHeight,5,25),this.mainCamera.position.z=10,this.occlusionCamera=this.mainCamera.clone(),this.occlusionCamera.layers.set(this.OCCLUSION_LAYER),this.backLight=new t.PointLight(43775,50,0),this.backLight.layers.enable(this.OCCLUSION_LAYER),this.backLight.position.set(-10,0,5),this.mainScene.add(this.backLight),this.fillLight=new t.PointLight(43775,.7,10),this.fillLight.layers.enable(this.OCCLUSION_LAYER),this.fillLight.position.set(10,0,0),this.mainScene.add(this.fillLight),this.keyLight=new t.PointLight(16711935,50,20),this.keyLight.layers.enable(this.OCCLUSION_LAYER),this.keyLight.position.set(10,0,5),this.mainScene.add(this.keyLight),this.renderer=new t.WebGLRenderer,this.renderer.setSize(1*window.innerWidth,1*window.innerHeight),this.mount.appendChild(this.renderer.domElement),this.loader=new n.GLTFLoader,this.modelFile=require(\"./devface.glb\"),this.modelContainer=new t.Group,this.modelContainer.layers.enable(this.OCCLUSION_LAYER),this.mainScene.add(this.modelContainer),this.loader.load(this.modelFile,function(i){i.scene.scale.set(.2,.2,.2),e.modelContainer.position.set(0,-.3,0),e.modelContainer.add(i.scene);var n=i.scene.clone(),r=new t.MeshBasicMaterial({color:new t.Color(0)});n.traverse(function(t){t.material&&(t.material=r),t.layers&&t.layers.set(e.OCCLUSION_LAYER)}),e.modelContainer.add(n)},void 0,console.error),this.startingSizeData=s(),this.lowResRenderTarget=new t.WebGLRenderTarget(2*this.startingSizeData.charCountCeil[0],2*this.startingSizeData.charCountCeil[1]);var p=new t.DepthTexture;p.type=t.UnsignedShortType,this.lowResRenderTarget.depthTexture=p,this.lowResEffectRenderTarget=new t.WebGLRenderTarget(2*this.startingSizeData.charCountCeil[0],2*this.startingSizeData.charCountCeil[1]),this.occlusionRenderTarget=new t.WebGLRenderTarget(2*this.startingSizeData.charCountCeil[0],2*this.startingSizeData.charCountCeil[1]);var g=[],w=document.createElement(\"canvas\");w.width=w.style.width=1*window.innerWidth,w.height=w.style.height=1*window.innerHeight;var C=w.getContext(\"2d\"),y=new t.Texture(w);y.minFilter=t.NearestFilter,y.magFilter=t.NearestFilter;var v=!1,S=function(e){return 1- --e*e*e*e};this.renderRipples=function(e){g.length?(v=!0,C.fillStyle=\"rgb(128, 128, 0)\",C.fillRect(0,0,w.width,w.height),g.forEach(function(t,i){if(t.age+=.2*e,t.age>1)g.splice(i,1);else{var n=w.height*S(t.age),r=t.age<.2?S(t.age/.2):1-(t.age-.2)/.8,o=C.createRadialGradient(t.position.x,t.position.y,.25*n,t.position.x,t.position.y,n);o.addColorStop(1,\"rgba(128, 128, 0, 0.5)\"),o.addColorStop(.8,\"rgba(\".concat(t.color.x,\", \").concat(t.color.y,\", \").concat(16*r,\", \").concat(r,\")\")),o.addColorStop(0,\"rgba(0, 0, 0, 0)\"),C.beginPath(),C.fillStyle=o,C.arc(t.position.x,t.position.y,n,0,2*Math.PI),C.fill()}}),y.needsUpdate=!0):v&&(C.fillStyle=\"rgb(128, 128, 0)\",C.fillRect(0,0,w.width,w.height),v=!1,y.needsUpdate=!0)},window.addEventListener(\"click\",function(e){g.push({age:0,position:new t.Vector2(e.clientX,e.clientY),color:new t.Vector2(e.clientX/window.innerWidth*1*255,e.clientY/window.innerHeight*1*255)})}),window.addEventListener(\"touchend\",function(e){var i=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;g.push({age:0,position:new t.Vector2(i,n),color:new t.Vector2(i/window.innerWidth*1*255,n/window.innerHeight*1*255)})});var R,P,b,L,T,x=new t.Group;this.mainScene.add(x),T=this.mainCamera,R=2*T.position.z*Math.tan(.5*T.fov*t.Math.DEG2RAD),P=R*T.aspect,b=R/2,L=P/2,x.position.x=-L,x.position.y=b;for(var O=new t.BufferGeometry,E=[],_=[],A=0;A<90;A++){var F=Math.random()*P,k=-Math.random()*R,z=2.5*(2*Math.random()-1);E.push(F,k,z),_.push(1+3*Math.random())}var I=new Float32Array(_),D=new Float32Array(E),q=new t.Float32BufferAttribute(E,3);O.setAttribute(\"position\",q);var N=new t.ShaderMaterial((0,d.default)());N.uniforms.pointSize.value=2,N.uniforms.decayModifier.value=2.5;var W=new t.Points(O,N);x.add(W),this.animateParticles=function(e){for(var t=0,i=0;i<90;i++)q.array[t]=(D[t]*L+I[i]*(1+4*M.x)*.2)%P,q.array[t+1]=(D[t+1]*b+I[i]*(1-4*M.y)*.1)%R,t+=3;q.needsUpdate=!0};var j=new t.CylinderGeometry(4,10,15,32,6,!0);j.applyMatrix4((new t.Matrix4).makeTranslation(0,-j.parameters.height/2,0)),j.applyMatrix4((new t.Matrix4).makeRotationX(-Math.PI/2)),this.lightCylinderMaterial=new t.ShaderMaterial((0,m.default)()),this.lightConeTarget=new t.Vector3(0,0,-8),this.lightCone=new t.Mesh(j,this.lightCylinderMaterial),this.lightCone.position.set(-5,5,-8),this.lightCone.layers.set(this.OCCLUSION_LAYER),this.lightCylinderMaterial.uniforms.spotPosition.value=this.lightCone.position,this.mainScene.add(this.lightCone);var H=new t.TextureLoader,U=require(\"./font3.png\"),Y=H.load(U);Y.minFilter=t.NearestFilter,Y.magFilter=t.NearestFilter;var G=new a.ShaderPass((0,h.default)());G.needsSwap=!1,G.uniforms.tLowRes.value=this.lowResEffectRenderTarget.texture,G.uniforms.tDepth.value=this.lowResRenderTarget.depthTexture,G.uniforms.cameraNear.value=this.mainCamera.near,G.uniforms.cameraFar.value=.35*this.mainCamera.far,G.uniforms.tFont.value=Y;var V=this.FONT_MAP_SIZE.x/this.FONT_CHAR_SIZE.x,X=this.FONT_MAP_SIZE.y/this.FONT_CHAR_SIZE.y;G.uniforms.fontCharTotalCount.value=Math.floor(V)*Math.floor(X),G.uniforms.fontCharSize.value.set(1/V,1/X),G.uniforms.fontCharCount.value.set(V,X),this.occlusionComposer=new r.EffectComposer(this.renderer,this.occlusionRenderTarget),this.occlusionComposer.renderToScreen=!1,this.occlusionComposer.addPass(new o.RenderPass(this.mainScene,this.occlusionCamera)),this.lightScatteringPass=new a.ShaderPass((0,f.default)()),this.lightScatteringPass.needsSwap=!1,this.occlusionComposer.addPass(this.lightScatteringPass),this.effectComposer=new r.EffectComposer(this.renderer,this.lowResEffectRenderTarget),this.effectComposer.renderToScreen=!1;var Z=new a.ShaderPass((0,l.default)());Z.textureID=null,Z.uniforms.tDiffuse.value=this.lowResRenderTarget.texture,Z.uniforms.tAdd.value=this.occlusionRenderTarget.texture,this.effectComposer.addPass(Z),this.scanPass=new a.ShaderPass((0,u.default)()),this.scanPass.uniforms.tDepth.value=p,this.scanPass.uniforms.cameraNear.value=this.mainCamera.near,this.scanPass.uniforms.cameraFar.value=this.mainCamera.far,this.effectComposer.addPass(this.scanPass);var B=new a.ShaderPass((0,c.default)());B.uniforms.tRipple.value=y,B.needsSwap=!1,this.effectComposer.addPass(B),this.finalComposer=new r.EffectComposer(this.renderer),this.finalComposer.addPass(G),this.mousemove=function(t){e.lightCone.position.x=10*(t.clientX/window.innerWidth*1*2-1),e.backLight.position.x=e.lightCone.position.x,M.set(t.clientX/window.innerWidth*1,t.clientY/window.innerHeight*1)},window.addEventListener(\"mousemove\",this.mousemove),this.touchMove=function(t){console.log(t.touches.length),t.touches.length<2&&(e.lightCone.position.x=5*(t.changedTouches[0].clientX/window.innerWidth*1*2-1),e.backLight.position.x=e.lightCone.position.x,M.set(t.changedTouches[0].clientX/window.innerWidth*1,t.changedTouches[0].clientY/window.innerHeight*1))},window.addEventListener(\"touchmove\",this.touchMove),this.updateAsciiRenderSize=function(){var t=s();G.uniforms.renderCharSize.value.set(1/t.charCountPrecise[0],1/t.charCountPrecise[1]),G.uniforms.renderCharCount.value.set(t.charCountPrecise[0],t.charCountPrecise[1]),e.lowResRenderTarget.setSize(2*t.charCountCeil[0],2*t.charCountCeil[1]),e.effectComposer.setSize(2*t.charCountCeil[0],2*t.charCountCeil[1]),e.occlusionComposer.setSize(2*t.charCountCeil[0],2*t.charCountCeil[1])},this.modelContainer.rotation.y=-1.57,this.resizeRenderer=function(){w.width=w.style.width=1*window.innerWidth,w.height=w.style.height=1*window.innerHeight,e.updateAsciiRenderSize(),e.renderer.setSize(1*window.innerWidth,1*window.innerHeight),e.mainCamera.aspect=window.innerWidth/window.innerHeight,e.mainCamera.updateProjectionMatrix(),e.occlusionCamera.aspect=e.mainCamera.aspect,e.occlusionCamera.updateProjectionMatrix()},this.resizeRenderer(),window.addEventListener(\"resize\",(0,i.default)(this.resizeRenderer,50)),this.start()}},{key:\"start\",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.renderScene))}},{key:\"stop\",value:function(){cancelAnimationFrame(this.frameId)}},{key:\"componentWillUnmount\",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}}]),g}();exports.default=_;"},"sourceMaps":null,"error":null,"hash":"48904b88094190b6a7c06912348fa8e8","cacheData":{"env":{}}}